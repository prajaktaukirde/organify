jQuery(document).ready(function(e){(function(){e(".xoo-aff-input-date").each(function(t,n){var s=e(n),o=s.data("date");s.datepicker(o)})})();var t,s,i=JSON.parse(xoo_aff_localize.states),n=function(e){var t=this;t.$selectCountry=e,t.id=t.$selectCountry.attr("name"),t.$form=t.$selectCountry.closest("form"),t.$selectState=t.$form.find('.xoo-aff-states[data-country_field="'+t.id+'"]'),t.$selectPhoneCode=t.$form.find('.xoo-aff-phone_code[data-country_field="'+t.id+'"]'),t.states=!!t.$selectState.length&&t.states(),t.$selectCountry.on("change",{country:t},this.onChange),t.$selectCountry.trigger("change")};if(n.prototype.onChange=function(e){var t=e.data.country;t.states&&t.states.updateStateField(e),t.$selectPhoneCode.length&&t.updatePhoneCodeField()},n.prototype.updatePhoneCodeField=function(){var e=this,t=e.$selectPhoneCode.find('option[data-country_code="'+e.$selectCountry.val()+'"]');t&&t.prop("selected","selected"),e.$selectPhoneCode.trigger("change")},n.prototype.states=function(){var s=this,n=s.$selectState,o=s.$selectState.data("default_state"),t={init:function(){t.$statePlaceholder=n.find('option[value="placeholder"]'),t.$selectStateCont=n.parent(),t.$inputState=t.createStateInput()},getStates:function(){var e=i[s.$selectCountry.val()];return e===void 0||e.length===0?null:e},createStateInput:function(){return e('<input type="text" />').prop("name",n.attr("name")).prop("placeholder",t.$statePlaceholder.html()).addClass(n.attr("class"))},updateStateField:function(s){var i,a=s.data.country;n.find("option").not(t.$statePlaceholder).remove(),a.$selectCountry.val()&&(i=t.getStates(),i?(t.$inputState.remove(),t.$selectStateCont.append(n),e.each(i,function(e,t){n.append('<option value="'+e+'">'+t+"</option>")}),o&&t.$selectStateCont.find("option[value="+o+"]").prop("selected","selected"),n.attr("select2")==="yes"&&n.select2()):(t.$selectStateCont.find(".select2-container").remove(),t.$selectStateCont.append(t.$inputState)))}};return t.init(),t},e.each(e("select.xoo-aff-country"),function(t,s){new n(e(s))}),s={init:function(){e(document.body).on("keyup change",'input.xoo-aff-password[check_strength="yes"]',this.strengthMeter)},strengthMeter:function(){var t=e(this).parents(".xoo-aff-group"),n=t.parents("form");submit=!!n.length&&e('button[type="submit"]',n),field=e(this),strength=1,passStrength=e(this).attr("strength_pass").length?e(this).attr("strength_pass"):xoo_aff_localize.password_strength.min_password_strength,fieldValue=field.val(),s.includeMeter(t,field),strength=s.checkPasswordStrength(t,field,passStrength),submit&&fieldValue.length>0&&strength<passStrength&&-1!==strength?submit.attr("disabled","disabled").addClass("disabled"):submit.removeAttr("disabled","disabled").removeClass("disabled")},includeMeter:function(t,n){var s=t.find(".xoo-aff-password-strength");""===n.val()?(s.hide(),e(document.body).trigger("xoo-aff-password-strength-hide")):0===s.length?(t.append('<div class="xoo-aff-password-strength" aria-live="polite"></div>'),e(document.body).trigger("xoo-aff-password-strength-added")):(s.show(),e(document.body).trigger("xoo-aff-password-strength-show"))},checkPasswordStrength:function(e,t,n){var s=e.find(".xoo-aff-password-strength"),r=e.find(".xoo-aff-password-hint"),a='<small class="xoo-aff-password-hint">'+xoo_aff_localize.password_strength.i18n_password_hint+"</small>",i=wp.passwordStrength.meter(t.val(),wp.passwordStrength.userInputBlacklist()),o="";if(s.removeClass("short bad good strong"),r.remove(),s.is(":hidden"))return i;switch(i<n&&(o=" - "+xoo_aff_localize.password_strength.i18n_password_error),i){case 0:s.addClass("short").html(pwsL10n.short+o),s.after(a);break;case 1:s.addClass("bad").html(pwsL10n.bad+o),s.after(a);break;case 2:s.addClass("bad").html(pwsL10n.bad+o),s.after(a);break;case 3:s.addClass("good").html(pwsL10n.good+o);break;case 4:s.addClass("strong").html(pwsL10n.strong+o);break;case 5:s.addClass("short").html(pwsL10n.mismatch);break}return i}},s.init(),e.fn.select2&&e('select.xoo-aff-select_list[select2="yes"] , select.xoo-aff-country[select2="yes"]').each(function(t,n){e(n).select2()}),e.fn.select2){function o(t){if(!t.id)return t.text;var n=t.element.getAttribute("data-country_code"),n=n&&n.toLowerCase(),s=e('<div class="xoo-aff-flag-cont"><span class="flag '+n+'"></span><span>'+t.text+"</span></div>");return s}e('select.xoo-aff-phone_code[select2="yes"]').each(function(t,n){e(n).select2({templateResult:o,templateSelection:o,dropdownCssClass:"xoo-aff-select2-dropdown"})})}e("body").on("click",".xoo-aff-pw-toggle",function(){var t=e(this).closest(".xoo-aff-group").find("input.xoo-aff-password");e(this).toggleClass("active"),e(this).hasClass("active")?(t.attr("type","text"),e(this).find(".xoo-aff-pwtog-hide").show(),e(this).find(".xoo-aff-pwtog-show").hide()):(t.attr("type","password"),e(this).find(".xoo-aff-pwtog-show").show(),e(this).find(".xoo-aff-pwtog-hide").hide())}),e("body").on("change",'.xoo-aff-file-profile input[type="file"]',function(){var s=this.files[0],n=e(this).closest(".xoo-aff-group");if(s){const e=new FileReader;e.onload=function(e){t.init(n,e.target.result),t.onImageLoad(),n.find(".xoo-ff-file-remove")&&n.find(".xoo-ff-files").remove()},e.readAsDataURL(s)}else t.init(n,""),t.onImageRemove()}),t={init:function(e,t=""){this.$cont=e,this.imgSrc=t,this.$preview=e.find(".xoo-ff-file-preview"),this.$icon=e.find(".xoo-aff-input-icon "),this.$checkIcon=e.find(".xoo-ff-file-plcheck"),this.$addIcon=e.find(".xoo-ff-file-pladd")},onImageLoad:function(){this.$preview.attr("src",t.imgSrc).show(),this.$icon.hide(),this.$addIcon.hide(),this.$checkIcon.show()},onImageRemove:function(){this.$icon.show(),this.$checkIcon.hide(),this.$addIcon.show(),this.$preview.attr("src","").hide()}},e(".xoo-aff-file-profile-cont").each(function(n,s){var o=e(s),i=o.find(".xoo-ff-file-link");i.length&&(t.init(o,i.attr("href")),t.onImageLoad())}),e("body").on("click",".xoo-aff-file-profile-cont .xoo-ff-file-remove",function(){var n=e(this).closest(".xoo-aff-file-profile-cont");t.init(n),t.onImageRemove()}),e("body").on("click",".xoo-ff-file-remove",function(){e(this).closest("div").remove()})})